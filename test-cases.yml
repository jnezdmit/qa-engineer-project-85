---
- summary: |
    Успешная авторизация через GitHub
  requirement: |
    При верном вводе логина и пароля GitHub происходит успешная авторизация на codebattle
  prerequisites: |
    Открыта страница логина. Аккаунт на GitHub создан и авторизирован
  test-data: |
    Тестовые данные
    Логин = kirill_github Пароль = password_github
  steps:
    - Нажимаем кнопку "Sign In with GitHub"
    - В модальном окне подтверждаем авторизацию через аккаунт GitHub
  expected-result: |
    Пользователь должен попасть на главную страницу с сообщением "Successfully authenticated" и авторизоваться

- summary: |
    Успешная авторизация через Discord
  requirement: |
    При верном вводе логина и пароля Discord происходит успешная авторизация на codebattle
  prerequisites:
    Открыта страница логина
    Успешно авторизованный аккаунт Discord
  test-data: |
    Логин = login Пароль = password
  steps:
    - Нажимаем кнопку "Sign In with Discord"
    - На странице авторизации Discord нажать "Авторизовать"
  expected-result: |
    Пользователь должен попасть на главную страницу с сообщением "Successfully authenticated" и авторизоваться

- summary: |
    Возможность голосового чата участников через Discord
  requirement: |
    Пользователь может по ссылке присоединиться к серверу Discord codebattle для голосового чата с соперником
  prerequisites:
    Открыта страница логина
    Успешно авторизованный аккаунт codebattle
  test-data: |
    Логин = login Пароль = password
  steps:
    - Нажать на свой профиль в правом верхнем углу
    - Нажать "Join Discord"
  expected-result: |
    У пользователя происходит редирект в приложение / на сайт Discord с автоматическим присоединением к серверу codebattle

- summary: |
    Проверка входа пользователя с несуществующими логином
  requirement: |
    При неправильном логине или пароле пользователь должен получить сообщение об ошибке
  prerequisites:
    Открыта страница логина
  test-data: |
    Логин = prikol@mail.ru Пароль = prikol
  steps:
    - Вводим логин
    - Вводим пароль
    - Нажимаем кнопку «Submit»
  expected-result: |
    Пользователь должен получить сообщение EMAIL_NOT_FOUND

- summary: |
    Возможность сортировки рейтинга по рейтингу, количеству игр и т.д.
  requirement: |
    На странице рейтинга при нажатии на заголовки столбцов происходит сортировка
  prerequisites:
    Открыта страница рейтинга https://codebattle.hexlet.io/users
  test-data: |
    Логин = login Пароль = password
  steps:
    -  Нажить на заголовок "Rating"
    - Нажить на заголовок "Games played"
    - Нажить на заголовок "Performance"
    - Нажать на заголовок "Joined"
  expected-result: |
    Рейтинг сортируется по тому столбцу, который был нажат последним

- summary: |
    Возможность просмотра истории баттлов.
  requirement: |
    На главной странице есть вкладка истории прошедших баттлов
  prerequisites:
    Открыта главная страница
  test-data: |
    Логин = login Пароль = password
  steps:
    - Нажать на "Completed games"
  expected-result: |
    Пользователь увидит вкладку с историей последних прошедших баттлов, отсортированных по дате и времени окончания

- summary: |
    Возможность просмотра повтора баттла
  requirement: |
    Прошедший батл можно посмотреть в записи
  prerequisites:
    Открыта главная страница
  test-data: |
    Логин = login Пароль = password
  steps:
    - Нажать на "Completed games"
    - Рядом с любым баттлом нажать "Show"
    - На строке воспроизведения внизу нажать "Play"
  expected-result: |
    Пользователь просмотрит повтор баттла

- summary: |
    Возможность кастомизации при создании лобби - сложность, задача,тип, теги и временной лимит
  requirement: |
    При создании лобби открывается модальное окно с возможностью кастомизации
  prerequisites:
    Открыта главная страница
  test-data: |
    Логин = login Пароль = password
  steps:
    - Нажать на "Create a game"
    - В модальном окне выбрать сложность, time-limit, Game Type, Task, tags
    - Нажать "Create battle"
  expected-result: |
    Cоздастся лобби с выбранными параметрами

- summary: |
    Возможность выбора языка программирования в терминале баттла
  requirement: |
    В окне бота можно выбрать язык программирования, на котором будет писаться решение задачи
  prerequisites:
    Открыта главная страница
  test-data: |
    Логин = login Пароль = password
  steps:
    - Нажать на "Create a game"
    - В модальном окне выбрать сложность, time-limit, Game Type, Task, tags
    - Нажать "Create battle"
    - Над терминалом открыть список и выбрать "Python"
  expected-result: |
    Терминал изменит язык программирования, на котором будет проверять решение

- summary: |
    Мультиязычность задач (русский и английский)
  requirement: |
    На странице батла можно перевести задачу на выбранный язык
  prerequisites:
    Открыта главная страница
  test-data: |
    Логин = login Пароль = password
  steps:
    - Нажать на "Create a game"
    - В модальном окне выбрать сложность, time-limit, Game Type, Task, tags
    - Нажать "Create battle"
    - В поле задачи раскрыть список языков (изначально English)
    - Нажать "Русский"
  expected-result: |
    Задача переведётся с английского на русский

- summary: |
    Поддержка всех популярных языков программирования
  requirement: |
    В терминале баттла доступны все самые популярные языки программирования
  prerequisites:
    Открыта главная страница
  test-data: |
    Логин = login Пароль = password
  steps:
    - Нажать на "Create a game"
    - В модальном окне выбрать сложность, time-limit, Game Type, Task, tags
    - Нажать "Create battle"
    - Нажать на список языков программирования
  expected-result: |
    В списке присутствуют все самые популярные языки программирования, руководствуясь индексом TIOBE: https://www.tiobe.com/tiobe-index/

- summary: |
    Уведомление о начале баттла
  requirement: |
    На странице баттла появляется уведомление для одновременного начала баттла
  prerequisites:
    Открыта главная страница
  test-data: |
    Логин = login Пароль = password
  steps:
    - Нажать на "Create a game"
    - В модальном окне выбрать сложность, time-limit, Game Type, Task, tags
    - Нажать "Create battle"
    - Подтвердить готовность
  expected-result: |
    После временного отсчёта появляется уведомление о начале баттла

- summary: |
    Возможность просмотра баттла зрителям в режиме online
  requirement: |
    На главной странице можно присоединиться к просмотру баттла, который идёт в данный момент
  prerequisites:
    Открыта главная страница
  test-data: |
    Логин = login Пароль = password
  steps:
    - Выбрать вкладку "Lobby"
    - Нажать на кнопку "Show" напротив лобби, где есть оба соперника
  expected-result: |
    Пользователь должен попасть на страницу баттла и видеть изменения в режиме реального времени

- summary: |
    Возможность организации турниров
  requirement: |
    Можно создать турнир по выбранным параметрам
  prerequisites:
    Открыта главная страница
  test-data: |
    Логин = login Пароль = password
  steps:
    - Выбрать вкладку "Tournaments"
    - Нажать на гиперссылку "You may want to create one"
    - Ввести желаемые параметры турнира
    - Нажать "Create"
  expected-result: |
    Пользователь должен попасть на страницу созданного турнира

- summary: |
    Возможность переподключения участника к баттлу
  requirement: |
    Пользователь может обратно присоединиться к баттлу, из которого вышел, если он участник
  prerequisites:
    Открыта главная страница
    Успешно авторизованный аккаунт codebattle
  test-data: |
    Логин = login Пароль = password
  steps:
    - Выбрать вкладку "Lobby"
    - Напротив открытого баттла нажать "Fight"
    - На странице баттла нажать "Back to home"
    - Напротив лобби, из которого вышли, нажать "Continue"
  expected-result: |
    Пользователь вернется обратно на страницу баттла как участник и продолжит

- summary: |
    После определения победителя должна быть возможность остаться в баттле и дописать код / ознакомиться с кодом
  requirement: |
    После успешной проверки кода и объявления победителя, участники могут остаться в лобби и дописать код / ознакомиться с кодом соперника
  prerequisites:
    Открыта главная страница
    Успешно авторизованный аккаунт codebattle
  test-data: |
    Логин = login Пароль = password
  steps:
    - Выбрать вкладку "Lobby"
    - Напротив открытого баттла нажать "Fight"
    - Дождаться успешной проверки кода соперника
  expected-result: |
    У участников появится модальное окно с выбором Quit lobby / Continue

- summary: |
    В истории есть иконка напротив никнейма, указывающая на победителя баттла
  requirement: |
    Значок кубка должен отображаться рядом с никнеймом победителя в истории баттлов
  prerequisites:
    Открыта главная страница
    Успешно авторизованный аккаунт codebattle
  test-data: |
    Логин = login Пароль = password
  steps:
    - Выбрать вкладку "COMPLETED GAMES"
  expected-result: |
    Напротив никнейма победителя отображается значок "кубка"

- summary: |
    Участник не может писать и изменять код соперника
  requirement: |
    Участники батла не могут вносить изменения и писать что-либо в терминале соперника
  prerequisites:
    Открыта главная страница
    Успешно авторизованный аккаунт codebattle
  test-data: |
    Логин = login Пароль = password
  steps:
    - Выбрать вкладку "Lobby"
    - Напротив открытого лобби нажать "Fight"
    - Навести курсор на любое место в терминале соперника и нажать ЛКМ
    - Начать вводить "abcde"
  expected-result: |
    Ничего не должно произойти. Вводимые символы не должны вписываться в терминале соперника

- summary: |
    Успешная авторизация через GitHub в мобильной версии
  requirement: |
    При верном вводе логина и пароля GitHub происходит успешная авторизация на codebattle в мобильной версии сайта
  prerequisites: |
    Открыта страница логина в мобильном браузере. Аккаунт на GitHub создан
    Окружение: Samsung A50, Android 11, Yandex Browser 23.1.0 Сборка 330
  test-data: |
    Логин = kirill_github Пароль = password_github
  steps:
    - Нажимаем кнопку "Sign In with GitHub"
    - Авторизуемся существующим аккаунтом GitHub
  expected-result: |
    Пользователь должен попасть на главную страницу с сообщением "Successfully authenticated" и авторизоваться

- summary: |
    Корректное отображение основных страниц и функций в мобильной версии сайта
  requirement: |
    Все страницы отображаются корректно в мобильной версии сайта, функции сайта срабатывают исправно и отображаются
  prerequisites: |
    Открыта главная страница codebattle с вкладкой "Lobby" в мобильном браузере. Аккаунт авторизован.
    Окружение: Samsung A50, Android 11, Yandex Browser 23.1.0 Сборка 330
  test-data: |
    Логин = kirill_github Пароль = password_github
  steps:
    - Нажимаем на вкладку "Tournaments"
    - Нажимаем на вкладку "Completed games"
    - В нижней части сайта на блоке "LEADERBOARD" нажать на "Month"
    - В нижней части сайта на блоке "LEADERBOARD" нажать на "All"
    - В нижней части сайта на блоке "LEADERBOARD" нажать на "Week"
    - В нижней части сайта на блоке "LEADERBOARD" нажать на "TOP List"
    - Нажать на Шапку сайта с названием "Codebattle..." для редиректа на главную страницу
    - Нажать на "≡" в шапке сайта
    - Нажать на Имя своего профиля
    - Нажать "My Profile"
    - Нажать на название в шапке сайта для редиректа на главную страницу
    - Нажать "Create A game"
    - Выбрать Level=1, Game type=with a bot, time control=8min,task=random task
    - Нажать "Create Battle"
    - Сменить язык задачи на RU
    - Сменить язык программирования на Java 18
    - Нажать на терминал и начать вводить код
    - Нажать "Press check solution or press give up"
  expected-result: |
    Все страницы отображаются корректно и функционал работает
